{
  "branchName": "refactor/frontend-splits-and-tests",
  "projectContext": "Airgapper frontend component refactoring - splitting large components into smaller, focused modules for better maintainability. Also adding test coverage for frontend components.",
  "userStories": [
    {
      "id": "1",
      "title": "Split HostSetup.tsx into step components",
      "description": "The 789-line HostSetup.tsx is too large. Split into focused step components: HostSetupIntro.tsx, HostSetupStorage.tsx, HostSetupTerms.tsx, HostSetupInitialize.tsx, HostSetupComplete.tsx. The main HostSetup.tsx should orchestrate the steps with minimal logic.",
      "acceptanceCriteria": [
        "frontend/src/components/host-setup/ directory exists with 5+ component files",
        "No single file exceeds 200 lines",
        "Original HostSetup.tsx reduced to orchestration only (<150 lines)",
        "Frontend builds: cd frontend && npm run build",
        "UI behavior unchanged"
      ],
      "priority": 1,
      "passes": true
    },
    {
      "id": "2",
      "title": "Split Dashboard.tsx into tab components",
      "description": "The 588-line Dashboard.tsx should be split into focused tab components: DashboardOverview.tsx, DashboardRequests.tsx, DashboardSettings.tsx. Main Dashboard.tsx handles tab state and routing.",
      "acceptanceCriteria": [
        "frontend/src/components/dashboard/ directory exists with 3+ component files",
        "No single file exceeds 250 lines",
        "Frontend builds: cd frontend && npm run build",
        "UI behavior unchanged"
      ],
      "priority": 2,
      "passes": true
    },
    {
      "id": "3",
      "title": "Split InitVault.tsx into step components",
      "description": "The 563-line InitVault.tsx should be split into step components for each initialization phase: InitVaultForm.tsx, InitVaultProgress.tsx, InitVaultComplete.tsx.",
      "acceptanceCriteria": [
        "frontend/src/components/init-vault/ directory exists with 3+ component files",
        "No single file exceeds 200 lines",
        "Frontend builds: cd frontend && npm run build",
        "UI behavior unchanged"
      ],
      "priority": 3,
      "passes": true
    },
    {
      "id": "4",
      "title": "Split JoinVault.tsx into mode components",
      "description": "The 360-line JoinVault.tsx has two modes (SSS and consensus). Split into: JoinVaultSSS.tsx, JoinVaultConsensus.tsx, with shared form components.",
      "acceptanceCriteria": [
        "frontend/src/components/join-vault/ directory exists with 3+ component files",
        "No single file exceeds 150 lines",
        "Frontend builds: cd frontend && npm run build",
        "UI behavior unchanged"
      ],
      "priority": 4,
      "passes": true
    },
    {
      "id": "5",
      "title": "Add unit tests for SSS library",
      "description": "The frontend/src/lib/sss.ts library has good test coverage but ensure edge cases are covered: empty inputs, invalid hex, boundary conditions for Shamir's Secret Sharing.",
      "acceptanceCriteria": [
        "frontend/src/lib/sss.test.ts has >95% coverage",
        "Tests cover: empty inputs, invalid hex, min/max share counts, share reconstruction order independence",
        "Tests pass: cd frontend && npm test"
      ],
      "priority": 5,
      "passes": true
    },
    {
      "id": "6",
      "title": "Add unit tests for crypto library",
      "description": "Add tests for frontend/src/lib/crypto.ts covering key generation, encryption/decryption round-trips, and error cases.",
      "acceptanceCriteria": [
        "frontend/src/lib/crypto.test.ts exists with comprehensive tests",
        "Tests cover: key generation, encrypt/decrypt round-trip, invalid inputs",
        "Tests pass: cd frontend && npm test"
      ],
      "priority": 6,
      "passes": true
    },
    {
      "id": "7",
      "title": "Final validation - lint, typecheck, build, test",
      "description": "Run all quality checks across the frontend codebase after refactoring.",
      "acceptanceCriteria": [
        "cd frontend && npx eslint src/ --max-warnings=0 passes",
        "cd frontend && npx tsc --noEmit passes",
        "cd frontend && npm run build passes",
        "cd frontend && npm test passes (if tests exist)"
      ],
      "priority": 7,
      "passes": true
    }
  ]
}
